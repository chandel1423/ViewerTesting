<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Multi-viewer Interface</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script type="text/javascript" src="https://cesium.com/downloads/cesiumjs/releases/1.89/Build/Cesium/Cesium.js"></script>
  <link type="text/css" href="https://cesium.com/downloads/cesiumjs/releases/1.89/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <link type="text/css" href="css/ui-lightness/jquery-ui-1.10.3.custom.css" rel="Stylesheet">
  <link type="text/css" href="css/webrtiviewer.css" rel="Stylesheet">
  <script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
  <script type="text/javascript" src="js/jquery-ui.min.js"></script>
  <script type="text/javascript" src="js/pep.min.js"></script>
  <script type="text/javascript" src="spidergl/spidergl.min.js"></script>
  <script type="text/javascript" src="spidergl/multires.min.js"></script>
  <script type="text/javascript" src="main.js"></script>

<style> 
  html { 
    overflow-y: visible; 
    overflow-x: visible; 
  }
  body { 
    position: absolute; 
  }
  #togglebuttons {
    margin-bottom: 20px;
  }
  #blankAlert {
    display: none
  }
  #cesiumContainer {
    float: left;
    margin-right: 3vw;
    width:90vw; height:80vh;
  }
  #rtiContainer { 
    display: none;
    float: left;
    margin-right: 3vw;
    width:90vw; height:80vh;
    border:1px solid; padding:10px;
  }
  #dwgContainer { 
    display: none; 
    float: left;
    margin-right: 3vw;
    width:90vw; height:80vh;
    border:1px solid; padding:10px;
  }
</style>
</head>

<body>
  <div id="togglebuttons">
    <button onclick="viewertoggle(cesiumContainer)" style="background-color:lightgreen">Cesium Ion</button>
    <button onclick="viewertoggle(rtiContainer)" style="background-color:coral">RTI Viewer</button>
    <button onclick="viewertoggle(dwgContainer)" style="background-color:lightblue">DWG File Viewer</button>
  </div>

  <div id="blankAlert">
    Please choose a viewer to start from.
  </div>

  <div id="cesiumContainer">
    <script>
    // Access token for Cesium Ion
    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJlNjQ1NTgwOS1hM2QzLTQ1Y2QtOWE5Zi1jODc1ZTJjNDkxODEiLCJpZCI6NzkyNDQsImlhdCI6MTY0MTkzMTc3NH0.AmCqPPV7p3Oldv_Vk-WrBPm_NwkhpTxgZWZaqWnI-pE';
    const viewer = new Cesium.Viewer('cesiumContainer', {
        globe: false,
        animation: false,
        timeline: false,
        skyBox: false,
    });    
    var scene = viewer.scene;
    scene.backgroundColor = Cesium.Color.BLACK.clone();

    const tileset = viewer.scene.primitives.add(
        new Cesium.Cesium3DTileset({
        url: Cesium.IonResource.fromAssetId(755017),
      })
    );
    tileset.readyPromise.then(function(tileset) {
    viewer.camera.viewBoundingSphere(tileset.boundingSphere, new Cesium.HeadingPitchRange(0, -0.5, 0));
    });
    </script>
    <div>
    <button type="button" class="cesium-button" onclick = "topView();" data-toggle="tooltip" data-placement="bottom" 
      title="Click to view the model from the top">Top View</button>
    <button type="button" class="cesium-button" onclick = "bottomView();" data-toggle="tooltip" data-placement="bottom" 
      title="Click to view the model from the bottom">Bottom View</button>
    <button type="button" class="cesium-button" onclick = "frontView();" data-toggle="tooltip" data-placement="bottom" 
      title="Click to view the model from the front side">Front View</button>
    </div>
    <script>
      // Make functions that changes the view point in Cesium viewer
      function topView() {
          viewer.camera.viewBoundingSphere(tileset.boundingSphere, new Cesium.HeadingPitchRange(0, -Cesium.Math.PI_OVER_TWO, 0));
      }
      function bottomView() {
          viewer.camera.viewBoundingSphere(tileset.boundingSphere, new Cesium.HeadingPitchRange(0, Cesium.Math.PI_OVER_TWO, 0));
      }
      function frontView() {
          viewer.camera.viewBoundingSphere(tileset.boundingSphere, new Cesium.HeadingPitchRange(0, 0, 0));
      }
    </script>
  </div>

  <div id="rtiContainer">
    <script>
      createRtiViewer('rtiContainer', "webrti". document.getElementById('rtiContainer').clientWeight, document.getElementById('rtiContainer').clientHeight); 
    </script>
    <button type="button" class="rti-button" data-toggle="tooltip" data-placement="bottom" 
      title="sample button 1">button 1</button>
    <button type="button" class="rti-button" data-toggle="tooltip" data-placement="bottom" 
      title="sample button 2">button 2</button>
  </div>

  <div id="dwgContainer">
    DWG Viewer
    <button type="button" class="rti-button" data-toggle="tooltip" data-placement="bottom" 
      title="sample button 1">button 1</button>
    <button type="button" class="rti-button" data-toggle="tooltip" data-placement="bottom" 
      title="sample button 2">button 2</button>
  </div>

  <script>
    // Script for changing the width for each viewer based on number of viewers turned on
    var togglecount = 1;
    var rtiwidth = 1200;
    cesiumContainer.style.display = 'block';
    rtiContainer.style.display = 'none';
    dwgContainer.style.display = 'none';
    function changewidth() {
      changedWidth = (90-3*togglecount)/togglecount;
      cesiumContainer.style.width = changedWidth+'vw';
      rtiContainer.style.width = changedWidth+'vw';
      dwgContainer.style.width = changedWidth+'vw';
      rtiwidth = 600;      
    }
    // Function for turning each viewer on and off when pressing the corresponding button
    function viewertoggle(x) {
      if (x.style.display == 'none') {
        x.style.display = 'block';
        togglecount = togglecount + 1;
      }
      else {
        x.style.display = 'none';
        togglecount = togglecount - 1;
      }
      if (togglecount == 0) {
        // Displays the alert message when there is no viewer turned on
        blankAlert.style.display = 'block';
      }
      else {
        // Hides the alert message and changes the width of each viewer
        blankAlert.style.display = 'none';
        changewidth();
      }
    }
  </script>    
</body>
</html>